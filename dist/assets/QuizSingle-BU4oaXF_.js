import{e as Re,r as P,j as M,L as et,b as ft,g as pt,f as tt,h as gt,d as vt}from"./index-kHV-VyIh.js";import{r as rt,P as mt}from"./index-0F7z5_Rf.js";import{c as be,u as nt}from"./attemptStore-CKMlH9Z0.js";import{u as wt}from"./quizStore-B_VpjtdZ.js";import{X as yt}from"./x-DU5HDKOX.js";var it=Re();/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],xt=be("eraser",bt);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=[["path",{d:"M19 13v6h-6",key:"1hxl6d"}],["path",{d:"M5 11V5h6",key:"12e2xe"}],["path",{d:"m5 5 14 14",key:"11anup"}]],zt=be("move-diagonal-2",St);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Pt=be("pen",_t);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"9",y2:"21",key:"1ib60c"}],["line",{x1:"15",x2:"15",y1:"9",y2:"21",key:"1n26ft"}]],Ct=be("sheet",Dt);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Mt=be("trash",kt),Et=({isOpen:r,setIsOpen:i,isTraining:t,attempt:e,questions:n})=>{const o=P.useMemo(()=>t?"no-time":"timed",[t]),a=P.useMemo(()=>n.length>0&&n.every(R=>{var j;return"user_answer"in R&&((j=R.user_answer)==null?void 0:j.selected_answer)}),[n]),[l,c]=P.useState([]),[v,m]=P.useState([]),[p,k]=P.useState(0),[x,D]=P.useState(null),[E,_]=P.useState(new Set),[g,h]=P.useState(new Map),{answerLoading:d,answerQuestion:b}=nt(),[S,O]=P.useState({x:100,y:100}),[s,u]=P.useState({width:600,height:600}),[w,W]=P.useState(!1),[A,L]=P.useState(!1),I=P.useRef(null),G=P.useRef(null),se=P.useRef(null),T=P.useMemo(()=>n[p]||null,[n,p]),F=P.useMemo(()=>{var R;return!!(T&&"user_answer"in T&&((R=T.user_answer)!=null&&R.selected_answer))},[T]);P.useEffect(()=>{if(e!=null&&e.total_questions){const R=Array(e.total_questions).fill(null);c(R),m(R)}},[e==null?void 0:e.total_questions]),P.useEffect(()=>{e&&!t&&r&&D(Date.now())},[e,t,r]),P.useEffect(()=>{n.length>0&&k(0)},[n]);const y=P.useCallback(R=>{if(w&&I.current){const j=R.clientX-I.current.mouseX,B=R.clientY-I.current.mouseY,J=Math.min(Math.max(0,I.current.divX+j),window.innerWidth-s.width),V=Math.min(Math.max(0,I.current.divY+B),window.innerHeight-s.height);O({x:J,y:V})}else if(A&&G.current){const j=R.clientX-G.current.mouseX,B=R.clientY-G.current.mouseY,J=Math.min(Math.max(300,G.current.width+j),window.innerWidth-S.x),V=Math.min(Math.max(200,G.current.height+B),window.innerHeight-S.y);u({width:J,height:V})}},[w,A,S.x,S.y,s.height,s.width]),f=P.useCallback(()=>{W(!1),L(!1),I.current=null,G.current=null},[]);P.useEffect(()=>{if(w||A)return document.addEventListener("mousemove",y),document.addEventListener("mouseup",f),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",f)}},[w,A,y,f]);const C=P.useCallback(R=>{R.target.dataset.resizeHandle||(R.preventDefault(),I.current={mouseX:R.clientX,mouseY:R.clientY,divX:S.x,divY:S.y},W(!0))},[S]),N=P.useCallback(R=>{R.stopPropagation(),G.current={mouseX:R.clientX,mouseY:R.clientY,width:s.width,height:s.height},L(!0)},[s]),z=P.useCallback(R=>{var J;if(R<0||R>=n.length)return;if(x!==null&&T&&!F){const V=Date.now(),ee=Math.floor((V-x)/1e3);h(Q=>{const ne=new Map(Q);return ne.set(T.order,(ne.get(T.order)||0)+ee),ne})}k(R);const j=n[R],B=j&&"answer"in j&&((J=j.user_answer)==null?void 0:J.selected_answer);j&&!B&&!E.has(j.order)?D(Date.now()):D(null)},[n,x,T,E,F]),H=P.useCallback((R,j)=>{c(B=>{const J=[...B];return J[R]=j,J})},[]),U=P.useCallback(R=>{!T||F||m(j=>{const B=[...j];return B[T.order]=R,B})},[T,F]),X=P.useCallback(async()=>{if(!T||!e||F)return;const R=v[T.order];if(!R){alert("Please select an answer before completing.");return}if(E.has(T.order)){alert("You have already completed this question.");return}const j=Date.now(),B=x?Math.floor((j-x)/1e3):0,J=(g.get(T.order)||0)+B,V={question_id:T.id,selected_answer:R,time_taken:J};try{await b(e.id.toString(),V),_(Q=>new Set(Q).add(T.order)),h(Q=>{const ne=new Map(Q);return ne.set(T.order,J),ne}),D(null);const ee=n.findIndex((Q,ne)=>{var he;const K="answer"in Q&&((he=Q.user_answer)==null?void 0:he.selected_answer);return ne>p&&!K&&!E.has(Q.order)});ee!==-1&&z(ee)}catch(ee){console.error("Failed to submit answer:",ee),alert("Failed to submit answer. Please try again.")}},[T,e,v,E,x,g,b,n,p,z,F]),q=P.useCallback(()=>{if(!T||F)return;if(x!==null){const j=Date.now(),B=Math.floor((j-x)/1e3);h(J=>{const V=new Map(J);return V.set(T.order,(V.get(T.order)||0)+B),V}),D(null)}const R=p+1;R<n.length&&z(R)},[T,x,p,n.length,z,F]),$=P.useCallback(R=>R.stopPropagation(),[]);return r?M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"fixed inset-0 bg-black/10 bg-opacity-40 z-200",onClick:()=>i(!1)}),d?M.jsx(et,{}):M.jsxs("div",{ref:se,className:`z-[300] fixed bg-white p-4 overflow-auto shadow-lg rounded-md 
    ${window.innerWidth<1024?"left-1/2 -translate-x-1/2 bottom-0 cursor-default":"cursor-move"}`,style:{top:window.innerWidth<1024?"auto":S.y,left:window.innerWidth<1024?"50%":S.x,width:window.innerWidth<1024?"100%":s.width,height:window.innerWidth<1024?"60%":s.height,userSelect:w||A?"none":"auto"},onMouseDown:C,onClick:$,children:[M.jsx("button",{onClick:()=>i(!1),className:"absolute top-2 right-2 text-xl font-bold cursor-pointer z-10 hover:text-red-500","aria-label":"Close Modal",onMouseDown:$,children:"×"}),M.jsx("div",{className:"flex flex-wrap gap-4 mb-4 justify-center select-none",children:M.jsx("h2",{className:"text-lg font-semibold",children:"პასუხების ფურცელი"})}),o==="no-time"&&M.jsxs("div",{className:"overflow-auto max-h-[70vh]",children:[M.jsxs("table",{className:"w-full text-sm sm:text-base table-fixed border",children:[M.jsx("thead",{children:M.jsxs("tr",{children:[M.jsx("th",{className:"border px-1 py-1 w-8 sm:w-10",children:"#"}),["ა","ბ","გ","დ"].map(R=>M.jsx("th",{className:"border px-1 py-1",children:R},R))]})}),M.jsx("tbody",{children:n.map((R,j)=>M.jsxs("tr",{children:[M.jsx("td",{className:"border text-center",children:j+1}),["ა","ბ","გ","დ"].map(B=>M.jsx("td",{className:"border text-center",children:M.jsx("input",{type:"radio",name:`noTime-${j}`,value:B,checked:l[j]===B,onChange:()=>H(j,B),className:"mx-auto",onMouseDown:$})},B))]},j))})]}),M.jsx("div",{className:"mt-4 text-right",children:M.jsx("button",{onClick:()=>alert("Submit clicked (implement your logic)"),className:"border px-6 py-2 hover:bg-gray-100 rounded",disabled:d,children:d?"Submitting...":"Submit"})})]}),o==="timed"&&M.jsxs("div",{className:"flex flex-col gap-4",children:[M.jsxs("div",{className:"overflow-x-auto whitespace-nowrap border-b py-2",children:[n.map((R,j)=>{var J,V,ee;const B="answer"in R&&((J=R.user_answer)==null?void 0:J.selected_answer);return M.jsx("button",{onClick:()=>z(j),className:`inline-block px-3 py-1 mx-1 bg-gray-300 rounded-sm transition-colors ${p===j?"border-2":"border-0"} `,onMouseDown:$,title:B?`Answered: ${(ee=(V=R.user_answer)==null?void 0:V.selected_answer)==null?void 0:ee.toUpperCase()}`:"Not answered",children:R.order},R.id)}),a&&M.jsx(ft,{to:`/quiz/result/${e==null?void 0:e.id}`,className:"inline-block px-3 py-1 mx-1 rounded-sm transition-colors border-2",onMouseDown:$,children:"დასრულება"})]}),M.jsxs("div",{className:"text-center text-base font-semibold",children:["კითხვა ",T==null?void 0:T.order," / ",n.length,F&&M.jsxs("div",{className:"mt-1",children:[M.jsx("span",{className:"text-main-color title",children:"შესრულებულია"}),T&&"answer"in T&&T.user_answer&&M.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["თქვენი პასუხი: ",M.jsx("strong",{children:T.user_answer.selected_answer.toUpperCase()})]})]})]}),M.jsx("div",{className:"grid grid-cols-2 gap-4 justify-center max-w-sm mx-auto",children:["a","b","g","d"].map((R,j)=>{var Q;const B=["ა","ბ","გ","დ"],V=(((Q=T==null?void 0:T.user_answer)==null?void 0:Q.selected_answer)??v[T==null?void 0:T.order])===R,ee=F;return M.jsxs("label",{className:`flex items-center gap-2 border p-2 rounded cursor-pointer transition-colors
                                                    ${V?"bg-main-color/10 border-main-color":"hover:bg-gray-50"}
          ${ee?"cursor-not-allowed":""}
        `,onMouseDown:$,children:[M.jsx("input",{type:"radio",name:"timedAnswer",value:R,checked:V,onChange:()=>!ee&&U(R),disabled:ee}),M.jsx("span",{className:`${V?"text-main-color font-bold":""}`,children:B[j]}),V&&ee&&M.jsx("span",{className:"ml-auto text-main-color",children:"✓"})]},R)})}),M.jsxs("div",{className:"flex justify-center gap-4 mt-4",children:[M.jsx("button",{onClick:q,className:"border px-6 py-2 rounded hover:bg-gray-100 transition-colors",type:"button",disabled:d||F,children:"გამოტოვება"}),M.jsx("button",{onClick:X,className:`border px-6 py-2 rounded transition-colors ${F?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600"}`,type:"button",disabled:d||F,children:d?"ატვირთვა...":F?"უკვე შესრულებულია":"შესრულება"})]})]}),M.jsx("div",{"data-resize-handle":"true",onMouseDown:N,className:"w-8 h-8 bg-gray-100 flex items-center justify-center absolute top-1 left-1 cursor-se-resize rounded hover:bg-gray-200 transition-colors",title:"Resize",children:M.jsx(zt,{size:16})})]})]}):null};function je(r,i,t,e,n,o,a){try{var l=r[o](a),c=l.value}catch(v){t(v);return}l.done?i(c):Promise.resolve(c).then(e,n)}function Nt(r){return function(){var i=this,t=arguments;return new Promise(function(e,n){var o=r.apply(i,t);function a(c){je(o,e,n,a,l,"next",c)}function l(c){je(o,e,n,a,l,"throw",c)}a(void 0)})}}function ge(){return ge=Object.assign||function(r){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])}return r},ge.apply(this,arguments)}var ot={exports:{}};(function(r){var i=function(t){var e=Object.prototype,n=e.hasOwnProperty,o,a=typeof Symbol=="function"?Symbol:{},l=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",v=a.toStringTag||"@@toStringTag";function m(y,f,C){return Object.defineProperty(y,f,{value:C,enumerable:!0,configurable:!0,writable:!0}),y[f]}try{m({},"")}catch{m=function(f,C,N){return f[C]=N}}function p(y,f,C,N){var z=f&&f.prototype instanceof h?f:h,H=Object.create(z.prototype),U=new se(N||[]);return H._invoke=A(y,C,U),H}t.wrap=p;function k(y,f,C){try{return{type:"normal",arg:y.call(f,C)}}catch(N){return{type:"throw",arg:N}}}var x="suspendedStart",D="suspendedYield",E="executing",_="completed",g={};function h(){}function d(){}function b(){}var S={};m(S,l,function(){return this});var O=Object.getPrototypeOf,s=O&&O(O(T([])));s&&s!==e&&n.call(s,l)&&(S=s);var u=b.prototype=h.prototype=Object.create(S);d.prototype=b,m(u,"constructor",b),m(b,"constructor",d),d.displayName=m(b,v,"GeneratorFunction");function w(y){["next","throw","return"].forEach(function(f){m(y,f,function(C){return this._invoke(f,C)})})}t.isGeneratorFunction=function(y){var f=typeof y=="function"&&y.constructor;return f?f===d||(f.displayName||f.name)==="GeneratorFunction":!1},t.mark=function(y){return Object.setPrototypeOf?Object.setPrototypeOf(y,b):(y.__proto__=b,m(y,v,"GeneratorFunction")),y.prototype=Object.create(u),y},t.awrap=function(y){return{__await:y}};function W(y,f){function C(H,U,X,q){var $=k(y[H],y,U);if($.type==="throw")q($.arg);else{var R=$.arg,j=R.value;return j&&typeof j=="object"&&n.call(j,"__await")?f.resolve(j.__await).then(function(B){C("next",B,X,q)},function(B){C("throw",B,X,q)}):f.resolve(j).then(function(B){R.value=B,X(R)},function(B){return C("throw",B,X,q)})}}var N;function z(H,U){function X(){return new f(function(q,$){C(H,U,q,$)})}return N=N?N.then(X,X):X()}this._invoke=z}w(W.prototype),m(W.prototype,c,function(){return this}),t.AsyncIterator=W,t.async=function(y,f,C,N,z){z===void 0&&(z=Promise);var H=new W(p(y,f,C,N),z);return t.isGeneratorFunction(f)?H:H.next().then(function(U){return U.done?U.value:H.next()})};function A(y,f,C){var N=x;return function(H,U){if(N===E)throw new Error("Generator is already running");if(N===_){if(H==="throw")throw U;return F()}for(C.method=H,C.arg=U;;){var X=C.delegate;if(X){var q=L(X,C);if(q){if(q===g)continue;return q}}if(C.method==="next")C.sent=C._sent=C.arg;else if(C.method==="throw"){if(N===x)throw N=_,C.arg;C.dispatchException(C.arg)}else C.method==="return"&&C.abrupt("return",C.arg);N=E;var $=k(y,f,C);if($.type==="normal"){if(N=C.done?_:D,$.arg===g)continue;return{value:$.arg,done:C.done}}else $.type==="throw"&&(N=_,C.method="throw",C.arg=$.arg)}}}function L(y,f){var C=y.iterator[f.method];if(C===o){if(f.delegate=null,f.method==="throw"){if(y.iterator.return&&(f.method="return",f.arg=o,L(y,f),f.method==="throw"))return g;f.method="throw",f.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var N=k(C,y.iterator,f.arg);if(N.type==="throw")return f.method="throw",f.arg=N.arg,f.delegate=null,g;var z=N.arg;if(!z)return f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,g;if(z.done)f[y.resultName]=z.value,f.next=y.nextLoc,f.method!=="return"&&(f.method="next",f.arg=o);else return z;return f.delegate=null,g}w(u),m(u,v,"Generator"),m(u,l,function(){return this}),m(u,"toString",function(){return"[object Generator]"});function I(y){var f={tryLoc:y[0]};1 in y&&(f.catchLoc=y[1]),2 in y&&(f.finallyLoc=y[2],f.afterLoc=y[3]),this.tryEntries.push(f)}function G(y){var f=y.completion||{};f.type="normal",delete f.arg,y.completion=f}function se(y){this.tryEntries=[{tryLoc:"root"}],y.forEach(I,this),this.reset(!0)}t.keys=function(y){var f=[];for(var C in y)f.push(C);return f.reverse(),function N(){for(;f.length;){var z=f.pop();if(z in y)return N.value=z,N.done=!1,N}return N.done=!0,N}};function T(y){if(y){var f=y[l];if(f)return f.call(y);if(typeof y.next=="function")return y;if(!isNaN(y.length)){var C=-1,N=function z(){for(;++C<y.length;)if(n.call(y,C))return z.value=y[C],z.done=!1,z;return z.value=o,z.done=!0,z};return N.next=N}}return{next:F}}t.values=T;function F(){return{value:o,done:!0}}return se.prototype={constructor:se,reset:function(y){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(G),!y)for(var f in this)f.charAt(0)==="t"&&n.call(this,f)&&!isNaN(+f.slice(1))&&(this[f]=o)},stop:function(){this.done=!0;var y=this.tryEntries[0],f=y.completion;if(f.type==="throw")throw f.arg;return this.rval},dispatchException:function(y){if(this.done)throw y;var f=this;function C(q,$){return H.type="throw",H.arg=y,f.next=q,$&&(f.method="next",f.arg=o),!!$}for(var N=this.tryEntries.length-1;N>=0;--N){var z=this.tryEntries[N],H=z.completion;if(z.tryLoc==="root")return C("end");if(z.tryLoc<=this.prev){var U=n.call(z,"catchLoc"),X=n.call(z,"finallyLoc");if(U&&X){if(this.prev<z.catchLoc)return C(z.catchLoc,!0);if(this.prev<z.finallyLoc)return C(z.finallyLoc)}else if(U){if(this.prev<z.catchLoc)return C(z.catchLoc,!0)}else if(X){if(this.prev<z.finallyLoc)return C(z.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(y,f){for(var C=this.tryEntries.length-1;C>=0;--C){var N=this.tryEntries[C];if(N.tryLoc<=this.prev&&n.call(N,"finallyLoc")&&this.prev<N.finallyLoc){var z=N;break}}z&&(y==="break"||y==="continue")&&z.tryLoc<=f&&f<=z.finallyLoc&&(z=null);var H=z?z.completion:{};return H.type=y,H.arg=f,z?(this.method="next",this.next=z.finallyLoc,g):this.complete(H)},complete:function(y,f){if(y.type==="throw")throw y.arg;return y.type==="break"||y.type==="continue"?this.next=y.arg:y.type==="return"?(this.rval=this.arg=y.arg,this.method="return",this.next="end"):y.type==="normal"&&f&&(this.next=f),g},finish:function(y){for(var f=this.tryEntries.length-1;f>=0;--f){var C=this.tryEntries[f];if(C.finallyLoc===y)return this.complete(C.completion,C.afterLoc),G(C),g}},catch:function(y){for(var f=this.tryEntries.length-1;f>=0;--f){var C=this.tryEntries[f];if(C.tryLoc===y){var N=C.completion;if(N.type==="throw"){var z=N.arg;G(C)}return z}}throw new Error("illegal catch attempt")},delegateYield:function(y,f,C){return this.delegate={iterator:T(y),resultName:f,nextLoc:C},this.method==="next"&&(this.arg=o),g}},t}(r.exports);try{regeneratorRuntime=i}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}})(ot);var Le=ot.exports,st=function(i){var t=i.paths,e=i.id,n=i.strokeWidth,o=i.strokeColor,a=i.command,l=a===void 0?at:a;if(t.length===1){var c=t[0],v=c.x,m=c.y,p=n/2;return P.createElement("circle",{key:e,id:e,cx:v,cy:m,r:p,stroke:o,fill:o})}var k=t.reduce(function(x,D,E,_){return E===0?"M "+D.x+","+D.y:x+" "+l(D,E,_)},"");return P.createElement("path",{key:e,id:e,d:k,fill:"none",strokeLinecap:"round",stroke:o,strokeWidth:n})},Rt=function(i,t){var e=t.x-i.x,n=t.y-i.y;return{length:Math.sqrt(Math.pow(e,2)+Math.pow(n,2)),angle:Math.atan2(n,e)}},Se=function(i){var t=i.current,e=i.next,n=i.previous,o=i.reverse,a=n||t,l=e||t,c=.2,v=Rt(a,l),m=v.angle+(o?Math.PI:0),p=v.length*c,k=t.x+Math.cos(m)*p,x=t.y+Math.sin(m)*p;return[k,x]},at=function(i,t,e){var n=null,o=null;switch(t){case 0:var a=Se({current:i});n=a[0],o=a[1];break;case 1:var l=Se({current:e[t-1],next:i});n=l[0],o=l[1];break;default:var c=Se({current:e[t-1],previous:e[t-2],next:i});n=c[0],o=c[1];break}var v=Se({current:i,previous:e[t-1],next:e[t+1],reverse:!0}),m=v[0],p=v[1];return"C "+n+","+o+" "+m+","+p+" "+i.x+", "+i.y},Wt=function(i){var t=i.id,e=i.paths;return P.createElement(P.Fragment,null,e.map(function(n,o){return P.createElement(st,{key:t+"__"+o,paths:n.paths,id:t+"__"+o,strokeWidth:n.strokeWidth,strokeColor:n.strokeColor,command:at})}))},Ae=function(i){return new Promise(function(t,e){var n=new Image;n.addEventListener("load",function(){n.width>0&&t(n),e("Image not found")}),n.addEventListener("error",function(o){return e(o)}),n.src=i,n.setAttribute("crossorigin","anonymous")})};function He(r){var i,t=(i=r.firstChild)==null?void 0:i.cloneNode(!0),e=r.offsetWidth,n=r.offsetHeight;return t.setAttribute("viewBox","0 0 "+e+" "+n),t.setAttribute("width",e.toString()),t.setAttribute("height",n.toString()),{svgCanvas:t,width:e,height:n}}var Tt=P.forwardRef(function(r,i){var t=r.paths,e=r.isDrawing,n=r.onPointerDown,o=r.onPointerMove,a=r.onPointerUp,l=r.id,c=l===void 0?"react-sketch-canvas":l,v=r.width,m=v===void 0?"100%":v,p=r.height,k=p===void 0?"100%":p,x=r.className,D=x===void 0?"react-sketch-canvas":x,E=r.canvasColor,_=E===void 0?"red":E,g=r.backgroundImage,h=g===void 0?"":g,d=r.exportWithBackgroundImage,b=d===void 0?!1:d,S=r.preserveBackgroundImageAspectRatio,O=S===void 0?"none":S,s=r.allowOnlyPointerType,u=s===void 0?"all":s,w=r.style,W=w===void 0?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:w,A=r.svgStyle,L=A===void 0?{}:A,I=P.useRef(null),G=function(z){var H,U,X,q=(H=I.current)==null?void 0:H.getBoundingClientRect(),$=(U=window.scrollX)!=null?U:0,R=(X=window.scrollY)!=null?X:0;if(!q)return{x:0,y:0};var j={x:z.pageX-q.left-$,y:z.pageY-q.top-R};return j},se=function(z){if(!(u!=="all"&&z.pointerType!==u)&&!(z.pointerType==="mouse"&&z.button!==0)){var H=G(z);n(H)}},T=function(z){if(e&&!(u!=="all"&&z.pointerType!==u)){var H=G(z);o(H)}},F=function(z){z.pointerType==="mouse"&&z.button!==0||u!=="all"&&z.pointerType!==u||a()};P.useImperativeHandle(i,function(){return{exportImage:function(z){return new Promise(function(){var H=Nt(Le.mark(function U(X,q){var $,R,j,B,J,V,ee,Q;return Le.wrap(function(K){for(;;)switch(K.prev=K.next){case 0:if(K.prev=0,$=I.current,$){K.next=4;break}throw Error("Canvas not rendered yet");case 4:return R=He($),j=R.svgCanvas,B=R.width,J=R.height,V="data:image/svg+xml;base64,"+btoa(j.outerHTML),K.next=8,Ae(V);case 8:if(K.t0=K.sent,ee=[K.t0],!b){K.next=21;break}return K.prev=11,K.next=14,Ae(h);case 14:Q=K.sent,ee.push(Q),K.next=21;break;case 18:K.prev=18,K.t1=K.catch(11),console.warn("exportWithBackgroundImage props is set without a valid background image URL. This option is ignored");case 21:Promise.all(ee).then(function(he){var ve=document.createElement("canvas");ve.setAttribute("width",B.toString()),ve.setAttribute("height",J.toString());var xe=ve.getContext("2d");if(!xe)throw Error("Canvas not rendered yet");he.reverse().forEach(function(ie){xe.drawImage(ie,0,0)}),X(ve.toDataURL("image/"+z))}).catch(function(he){throw he}),K.next=27;break;case 24:K.prev=24,K.t2=K.catch(0),q(K.t2);case 27:case"end":return K.stop()}},U,null,[[0,24],[11,18]])}));return function(U,X){return H.apply(this,arguments)}}())},exportSvg:function(){return new Promise(function(z,H){try{var U,X=(U=I.current)!=null?U:null;if(X!==null){var q,$,R=He(X),j=R.svgCanvas;if(b){z(j.outerHTML);return}(q=j.querySelector("#"+c+"__background"))==null||q.remove(),($=j.querySelector("#"+c+"__canvas-background"))==null||$.setAttribute("fill",_),z(j.outerHTML)}H(new Error("Canvas not loaded"))}catch(B){H(B)}})}}}),P.useEffect(function(){return document.addEventListener("pointerup",F),function(){document.removeEventListener("pointerup",F)}},[F]);var y=t.filter(function(N){return!N.drawMode}),f=0,C=t.reduce(function(N,z){return z.drawMode?(N[f]===void 0&&(N[f]=[]),N[f].push(z),N):(f+=1,N)},[[]]);return P.createElement("div",{role:"presentation",ref:I,className:D,style:ge({touchAction:"none",width:m,height:k},W),"touch-action":"none",onPointerDown:se,onPointerMove:T,onPointerUp:F},P.createElement("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:ge({width:"100%",height:"100%"},L),id:c},P.createElement("g",{id:c+"__eraser-stroke-group",display:"none"},P.createElement("rect",{id:c+"__mask-background",x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),y.map(function(N,z){return P.createElement(st,{key:c+"__eraser-"+z,id:c+"__eraser-"+z,paths:N.paths,strokeColor:"#000000",strokeWidth:N.strokeWidth})})),P.createElement("defs",null,h&&P.createElement("pattern",{id:c+"__background",x:"0",y:"0",width:"100%",height:"100%",patternUnits:"userSpaceOnUse"},P.createElement("image",{x:"0",y:"0",width:"100%",height:"100%",xlinkHref:h,preserveAspectRatio:O})),y.map(function(N,z){return P.createElement("mask",{id:c+"__eraser-mask-"+z,key:c+"__eraser-mask-"+z,maskUnits:"userSpaceOnUse"},P.createElement("use",{href:"#"+c+"__mask-background"}),Array.from({length:y.length-z},function(H,U){return U+z}).map(function(H){return P.createElement("use",{key:H.toString(),href:"#"+c+"__eraser-"+H.toString()})}))})),P.createElement("g",{id:c+"__canvas-background-group"},P.createElement("rect",{id:c+"__canvas-background",x:"0",y:"0",width:"100%",height:"100%",fill:h?"url(#"+c+"__background)":_})),C.map(function(N,z){return P.createElement("g",{id:c+"__stroke-group-"+z,key:c+"__stroke-group-"+z,mask:"url(#"+c+"__eraser-mask-"+z+")"},P.createElement(Wt,{id:c,paths:N}))})))}),Ot=P.forwardRef(function(r,i){var t=r.id,e=t===void 0?"react-sketch-canvas":t,n=r.width,o=n===void 0?"100%":n,a=r.height,l=a===void 0?"100%":a,c=r.className,v=c===void 0?"":c,m=r.canvasColor,p=m===void 0?"white":m,k=r.strokeColor,x=k===void 0?"red":k,D=r.backgroundImage,E=D===void 0?"":D,_=r.exportWithBackgroundImage,g=_===void 0?!1:_,h=r.preserveBackgroundImageAspectRatio,d=h===void 0?"none":h,b=r.strokeWidth,S=b===void 0?4:b,O=r.eraserWidth,s=O===void 0?8:O,u=r.allowOnlyPointerType,w=u===void 0?"all":u,W=r.style,A=W===void 0?{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"}:W,L=r.svgStyle,I=L===void 0?{}:L,G=r.onChange,se=G===void 0?function(ie){}:G,T=r.onStroke,F=T===void 0?function(ie,Y){}:T,y=r.withTimestamp,f=y===void 0?!1:y,C=P.createRef(),N=P.useState(!0),z=N[0],H=N[1],U=P.useState(!1),X=U[0],q=U[1],$=P.useState([]),R=$[0],j=$[1],B=P.useState([]),J=B[0],V=B[1],ee=P.useState([]),Q=ee[0],ne=ee[1],K=P.useCallback(function(){var ie,Y,Z=(ie=(Y=Q.slice(-1))==null?void 0:Y[0])!=null?ie:null;if(Z===null){console.warn("No stroke found!");return}F(Z,!Z.drawMode)},[X]);P.useEffect(function(){K()},[X]),P.useEffect(function(){se(Q)},[Q]),P.useImperativeHandle(i,function(){return{eraseMode:function(Y){H(!Y)},clearCanvas:function(){j([].concat(Q)),ne([])},undo:function(){if(R.length!==0){ne([].concat(R)),j([]);return}V(function(Y){return[].concat(Y,Q.slice(-1))}),ne(function(Y){return Y.slice(0,-1)})},redo:function(){J.length!==0&&(ne(function(Y){return[].concat(Y,J.slice(-1))}),V(function(Y){return Y.slice(0,-1)}))},exportImage:function(Y){var Z,ae=(Z=C.current)==null?void 0:Z.exportImage;if(ae)return ae(Y);throw Error("Export function called before canvas loaded")},exportSvg:function(){return new Promise(function(Y,Z){var ae,le=(ae=C.current)==null?void 0:ae.exportSvg;le?le().then(function(de){Y(de)}).catch(function(de){Z(de)}):Z(Error("Export function called before canvas loaded"))})},exportPaths:function(){return new Promise(function(Y,Z){try{Y(Q)}catch(ae){Z(ae)}})},loadPaths:function(Y){ne(function(Z){return[].concat(Z,Y)})},getSketchingTime:function(){return new Promise(function(Y,Z){f||Z(new Error("Set 'withTimestamp' prop to get sketching time"));try{var ae=Q.reduce(function(le,de){var Te,Oe,ht=(Te=de.startTimestamp)!=null?Te:0,dt=(Oe=de.endTimestamp)!=null?Oe:0;return le+(dt-ht)},0);Y(ae)}catch(le){Z(le)}})},resetCanvas:function(){j([]),V([]),ne([])}}});var he=function(Y){q(!0),V([]);var Z={drawMode:z,strokeColor:z?x:"#000000",strokeWidth:z?S:s,paths:[Y]};f&&(Z=ge({},Z,{startTimestamp:Date.now(),endTimestamp:0})),ne(function(ae){return[].concat(ae,[Z])})},ve=function(Y){if(X){var Z=Q.slice(-1)[0],ae=ge({},Z,{paths:[].concat(Z.paths,[Y])});ne(function(le){return[].concat(le.slice(0,-1),[ae])})}},xe=function(){var Y,Z;if(X&&(q(!1),!!f)){var ae=(Y=(Z=Q.slice(-1))==null?void 0:Z[0])!=null?Y:null;if(ae!==null){var le=ge({},ae,{endTimestamp:Date.now()});ne(function(de){return[].concat(de.slice(0,-1),[le])})}}};return P.createElement(Tt,{ref:C,id:e,width:o,height:l,className:v,canvasColor:p,backgroundImage:E,exportWithBackgroundImage:g,preserveBackgroundImageAspectRatio:d,allowOnlyPointerType:w,style:A,svgStyle:I,paths:Q,isDrawing:X,onPointerDown:he,onPointerMove:ve,onPointerUp:xe})}),we={exports:{}},Me={};function lt(r){var i,t,e="";if(typeof r=="string"||typeof r=="number")e+=r;else if(typeof r=="object")if(Array.isArray(r))for(i=0;i<r.length;i++)r[i]&&(t=lt(r[i]))&&(e&&(e+=" "),e+=t);else for(i in r)r[i]&&(e&&(e+=" "),e+=i);return e}function Be(){for(var r,i,t=0,e="";t<arguments.length;)(r=arguments[t++])&&(i=lt(r))&&(e&&(e+=" "),e+=i);return e}const jt=Object.freeze(Object.defineProperty({__proto__:null,clsx:Be,default:Be},Symbol.toStringTag,{value:"Module"})),Lt=pt(jt);var te={},fe={},Ie;function ke(){if(Ie)return fe;Ie=1,Object.defineProperty(fe,"__esModule",{value:!0}),fe.dontSetMe=n,fe.findInArray=r,fe.int=e,fe.isFunction=i,fe.isNum=t;function r(o,a){for(let l=0,c=o.length;l<c;l++)if(a.apply(a,[o[l],l,o]))return o[l]}function i(o){return typeof o=="function"||Object.prototype.toString.call(o)==="[object Function]"}function t(o){return typeof o=="number"&&!isNaN(o)}function e(o){return parseInt(o,10)}function n(o,a,l){if(o[a])return new Error("Invalid prop ".concat(a," passed to ").concat(l," - do not set this, set it on the child."))}return fe}var pe={},$e;function At(){if($e)return pe;$e=1,Object.defineProperty(pe,"__esModule",{value:!0}),pe.browserPrefixToKey=t,pe.browserPrefixToStyle=e,pe.default=void 0,pe.getPrefix=i;const r=["Moz","Webkit","O","ms"];function i(){var o;let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const l=(o=window.document)===null||o===void 0||(o=o.documentElement)===null||o===void 0?void 0:o.style;if(!l||a in l)return"";for(let c=0;c<r.length;c++)if(t(a,r[c])in l)return r[c];return""}function t(o,a){return a?"".concat(a).concat(n(o)):o}function e(o,a){return a?"-".concat(a.toLowerCase(),"-").concat(o):o}function n(o){let a="",l=!0;for(let c=0;c<o.length;c++)l?(a+=o[c].toUpperCase(),l=!1):o[c]==="-"?l=!0:a+=o[c];return a}return pe.default=i(),pe}var Fe;function We(){if(Fe)return te;Fe=1,Object.defineProperty(te,"__esModule",{value:!0}),te.addClassName=S,te.addEvent=l,te.addUserSelectStyles=d,te.createCSSTransform=D,te.createSVGTransform=E,te.getTouch=g,te.getTouchIdentifier=h,te.getTranslation=_,te.innerHeight=p,te.innerWidth=k,te.matchesSelector=o,te.matchesSelectorAndParentsTo=a,te.offsetXYFromParent=x,te.outerHeight=v,te.outerWidth=m,te.removeClassName=O,te.removeEvent=c,te.removeUserSelectStyles=b;var r=ke(),i=e(At());function t(s){if(typeof WeakMap!="function")return null;var u=new WeakMap,w=new WeakMap;return(t=function(W){return W?w:u})(s)}function e(s,u){if(s&&s.__esModule)return s;if(s===null||typeof s!="object"&&typeof s!="function")return{default:s};var w=t(u);if(w&&w.has(s))return w.get(s);var W={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in s)if(L!=="default"&&Object.prototype.hasOwnProperty.call(s,L)){var I=A?Object.getOwnPropertyDescriptor(s,L):null;I&&(I.get||I.set)?Object.defineProperty(W,L,I):W[L]=s[L]}return W.default=s,w&&w.set(s,W),W}let n="";function o(s,u){return n||(n=(0,r.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(w){return(0,r.isFunction)(s[w])})),(0,r.isFunction)(s[n])?s[n](u):!1}function a(s,u,w){let W=s;do{if(o(W,u))return!0;if(W===w)return!1;W=W.parentNode}while(W);return!1}function l(s,u,w,W){if(!s)return;const A={capture:!0,...W};s.addEventListener?s.addEventListener(u,w,A):s.attachEvent?s.attachEvent("on"+u,w):s["on"+u]=w}function c(s,u,w,W){if(!s)return;const A={capture:!0,...W};s.removeEventListener?s.removeEventListener(u,w,A):s.detachEvent?s.detachEvent("on"+u,w):s["on"+u]=null}function v(s){let u=s.clientHeight;const w=s.ownerDocument.defaultView.getComputedStyle(s);return u+=(0,r.int)(w.borderTopWidth),u+=(0,r.int)(w.borderBottomWidth),u}function m(s){let u=s.clientWidth;const w=s.ownerDocument.defaultView.getComputedStyle(s);return u+=(0,r.int)(w.borderLeftWidth),u+=(0,r.int)(w.borderRightWidth),u}function p(s){let u=s.clientHeight;const w=s.ownerDocument.defaultView.getComputedStyle(s);return u-=(0,r.int)(w.paddingTop),u-=(0,r.int)(w.paddingBottom),u}function k(s){let u=s.clientWidth;const w=s.ownerDocument.defaultView.getComputedStyle(s);return u-=(0,r.int)(w.paddingLeft),u-=(0,r.int)(w.paddingRight),u}function x(s,u,w){const A=u===u.ownerDocument.body?{left:0,top:0}:u.getBoundingClientRect(),L=(s.clientX+u.scrollLeft-A.left)/w,I=(s.clientY+u.scrollTop-A.top)/w;return{x:L,y:I}}function D(s,u){const w=_(s,u,"px");return{[(0,i.browserPrefixToKey)("transform",i.default)]:w}}function E(s,u){return _(s,u,"")}function _(s,u,w){let{x:W,y:A}=s,L="translate(".concat(W).concat(w,",").concat(A).concat(w,")");if(u){const I="".concat(typeof u.x=="string"?u.x:u.x+w),G="".concat(typeof u.y=="string"?u.y:u.y+w);L="translate(".concat(I,", ").concat(G,")")+L}return L}function g(s,u){return s.targetTouches&&(0,r.findInArray)(s.targetTouches,w=>u===w.identifier)||s.changedTouches&&(0,r.findInArray)(s.changedTouches,w=>u===w.identifier)}function h(s){if(s.targetTouches&&s.targetTouches[0])return s.targetTouches[0].identifier;if(s.changedTouches&&s.changedTouches[0])return s.changedTouches[0].identifier}function d(s){if(!s)return;let u=s.getElementById("react-draggable-style-el");u||(u=s.createElement("style"),u.type="text/css",u.id="react-draggable-style-el",u.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,u.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,s.getElementsByTagName("head")[0].appendChild(u)),s.body&&S(s.body,"react-draggable-transparent-selection")}function b(s){if(s)try{if(s.body&&O(s.body,"react-draggable-transparent-selection"),s.selection)s.selection.empty();else{const u=(s.defaultView||window).getSelection();u&&u.type!=="Caret"&&u.removeAllRanges()}}catch{}}function S(s,u){s.classList?s.classList.add(u):s.className.match(new RegExp("(?:^|\\s)".concat(u,"(?!\\S)")))||(s.className+=" ".concat(u))}function O(s,u){s.classList?s.classList.remove(u):s.className=s.className.replace(new RegExp("(?:^|\\s)".concat(u,"(?!\\S)"),"g"),"")}return te}var ue={},Xe;function ut(){if(Xe)return ue;Xe=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.canDragX=n,ue.canDragY=o,ue.createCoreData=l,ue.createDraggableData=c,ue.getBoundPosition=t,ue.getControlPosition=a,ue.snapToGrid=e;var r=ke(),i=We();function t(p,k,x){if(!p.props.bounds)return[k,x];let{bounds:D}=p.props;D=typeof D=="string"?D:v(D);const E=m(p);if(typeof D=="string"){const{ownerDocument:_}=E,g=_.defaultView;let h;if(D==="parent"?h=E.parentNode:h=_.querySelector(D),!(h instanceof g.HTMLElement))throw new Error('Bounds selector "'+D+'" could not find an element.');const d=h,b=g.getComputedStyle(E),S=g.getComputedStyle(d);D={left:-E.offsetLeft+(0,r.int)(S.paddingLeft)+(0,r.int)(b.marginLeft),top:-E.offsetTop+(0,r.int)(S.paddingTop)+(0,r.int)(b.marginTop),right:(0,i.innerWidth)(d)-(0,i.outerWidth)(E)-E.offsetLeft+(0,r.int)(S.paddingRight)-(0,r.int)(b.marginRight),bottom:(0,i.innerHeight)(d)-(0,i.outerHeight)(E)-E.offsetTop+(0,r.int)(S.paddingBottom)-(0,r.int)(b.marginBottom)}}return(0,r.isNum)(D.right)&&(k=Math.min(k,D.right)),(0,r.isNum)(D.bottom)&&(x=Math.min(x,D.bottom)),(0,r.isNum)(D.left)&&(k=Math.max(k,D.left)),(0,r.isNum)(D.top)&&(x=Math.max(x,D.top)),[k,x]}function e(p,k,x){const D=Math.round(k/p[0])*p[0],E=Math.round(x/p[1])*p[1];return[D,E]}function n(p){return p.props.axis==="both"||p.props.axis==="x"}function o(p){return p.props.axis==="both"||p.props.axis==="y"}function a(p,k,x){const D=typeof k=="number"?(0,i.getTouch)(p,k):null;if(typeof k=="number"&&!D)return null;const E=m(x),_=x.props.offsetParent||E.offsetParent||E.ownerDocument.body;return(0,i.offsetXYFromParent)(D||p,_,x.props.scale)}function l(p,k,x){const D=!(0,r.isNum)(p.lastX),E=m(p);return D?{node:E,deltaX:0,deltaY:0,lastX:k,lastY:x,x:k,y:x}:{node:E,deltaX:k-p.lastX,deltaY:x-p.lastY,lastX:p.lastX,lastY:p.lastY,x:k,y:x}}function c(p,k){const x=p.props.scale;return{node:k.node,x:p.state.x+k.deltaX/x,y:p.state.y+k.deltaY/x,deltaX:k.deltaX/x,deltaY:k.deltaY/x,lastX:p.state.x,lastY:p.state.y}}function v(p){return{left:p.left,top:p.top,right:p.right,bottom:p.bottom}}function m(p){const k=p.findDOMNode();if(!k)throw new Error("<DraggableCore>: Unmounted during event!");return k}return ue}var ye={},ze={},Ue;function ct(){if(Ue)return ze;Ue=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.default=r;function r(){}return ze}var Ye;function Ht(){if(Ye)return ye;Ye=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.default=void 0;var r=v(tt()),i=l(rt()),t=l(Re()),e=We(),n=ut(),o=ke(),a=l(ct());function l(_){return _&&_.__esModule?_:{default:_}}function c(_){if(typeof WeakMap!="function")return null;var g=new WeakMap,h=new WeakMap;return(c=function(d){return d?h:g})(_)}function v(_,g){if(_&&_.__esModule)return _;if(_===null||typeof _!="object"&&typeof _!="function")return{default:_};var h=c(g);if(h&&h.has(_))return h.get(_);var d={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in _)if(S!=="default"&&Object.prototype.hasOwnProperty.call(_,S)){var O=b?Object.getOwnPropertyDescriptor(_,S):null;O&&(O.get||O.set)?Object.defineProperty(d,S,O):d[S]=_[S]}return d.default=_,h&&h.set(_,d),d}function m(_,g,h){return g=p(g),g in _?Object.defineProperty(_,g,{value:h,enumerable:!0,configurable:!0,writable:!0}):_[g]=h,_}function p(_){var g=k(_,"string");return typeof g=="symbol"?g:String(g)}function k(_,g){if(typeof _!="object"||_===null)return _;var h=_[Symbol.toPrimitive];if(h!==void 0){var d=h.call(_,g);if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(g==="string"?String:Number)(_)}const x={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let D=x.mouse,E=class extends r.Component{constructor(){super(...arguments),m(this,"dragging",!1),m(this,"lastX",NaN),m(this,"lastY",NaN),m(this,"touchIdentifier",null),m(this,"mounted",!1),m(this,"handleDragStart",g=>{if(this.props.onMouseDown(g),!this.props.allowAnyClick&&typeof g.button=="number"&&g.button!==0)return!1;const h=this.findDOMNode();if(!h||!h.ownerDocument||!h.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:d}=h;if(this.props.disabled||!(g.target instanceof d.defaultView.Node)||this.props.handle&&!(0,e.matchesSelectorAndParentsTo)(g.target,this.props.handle,h)||this.props.cancel&&(0,e.matchesSelectorAndParentsTo)(g.target,this.props.cancel,h))return;g.type==="touchstart"&&g.preventDefault();const b=(0,e.getTouchIdentifier)(g);this.touchIdentifier=b;const S=(0,n.getControlPosition)(g,b,this);if(S==null)return;const{x:O,y:s}=S,u=(0,n.createCoreData)(this,O,s);(0,a.default)("DraggableCore: handleDragStart: %j",u),(0,a.default)("calling",this.props.onStart),!(this.props.onStart(g,u)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,e.addUserSelectStyles)(d),this.dragging=!0,this.lastX=O,this.lastY=s,(0,e.addEvent)(d,D.move,this.handleDrag),(0,e.addEvent)(d,D.stop,this.handleDragStop))}),m(this,"handleDrag",g=>{const h=(0,n.getControlPosition)(g,this.touchIdentifier,this);if(h==null)return;let{x:d,y:b}=h;if(Array.isArray(this.props.grid)){let s=d-this.lastX,u=b-this.lastY;if([s,u]=(0,n.snapToGrid)(this.props.grid,s,u),!s&&!u)return;d=this.lastX+s,b=this.lastY+u}const S=(0,n.createCoreData)(this,d,b);if((0,a.default)("DraggableCore: handleDrag: %j",S),this.props.onDrag(g,S)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const u=document.createEvent("MouseEvents");u.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(u)}return}this.lastX=d,this.lastY=b}),m(this,"handleDragStop",g=>{if(!this.dragging)return;const h=(0,n.getControlPosition)(g,this.touchIdentifier,this);if(h==null)return;let{x:d,y:b}=h;if(Array.isArray(this.props.grid)){let u=d-this.lastX||0,w=b-this.lastY||0;[u,w]=(0,n.snapToGrid)(this.props.grid,u,w),d=this.lastX+u,b=this.lastY+w}const S=(0,n.createCoreData)(this,d,b);if(this.props.onStop(g,S)===!1||this.mounted===!1)return!1;const s=this.findDOMNode();s&&this.props.enableUserSelectHack&&(0,e.removeUserSelectStyles)(s.ownerDocument),(0,a.default)("DraggableCore: handleDragStop: %j",S),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,s&&((0,a.default)("DraggableCore: Removing handlers"),(0,e.removeEvent)(s.ownerDocument,D.move,this.handleDrag),(0,e.removeEvent)(s.ownerDocument,D.stop,this.handleDragStop))}),m(this,"onMouseDown",g=>(D=x.mouse,this.handleDragStart(g))),m(this,"onMouseUp",g=>(D=x.mouse,this.handleDragStop(g))),m(this,"onTouchStart",g=>(D=x.touch,this.handleDragStart(g))),m(this,"onTouchEnd",g=>(D=x.touch,this.handleDragStop(g)))}componentDidMount(){this.mounted=!0;const g=this.findDOMNode();g&&(0,e.addEvent)(g,x.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const g=this.findDOMNode();if(g){const{ownerDocument:h}=g;(0,e.removeEvent)(h,x.mouse.move,this.handleDrag),(0,e.removeEvent)(h,x.touch.move,this.handleDrag),(0,e.removeEvent)(h,x.mouse.stop,this.handleDragStop),(0,e.removeEvent)(h,x.touch.stop,this.handleDragStop),(0,e.removeEvent)(g,x.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,e.removeUserSelectStyles)(h)}}findDOMNode(){var g,h;return(g=this.props)!==null&&g!==void 0&&g.nodeRef?(h=this.props)===null||h===void 0||(h=h.nodeRef)===null||h===void 0?void 0:h.current:t.default.findDOMNode(this)}render(){return r.cloneElement(r.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};return ye.default=E,m(E,"displayName","DraggableCore"),m(E,"propTypes",{allowAnyClick:i.default.bool,children:i.default.node.isRequired,disabled:i.default.bool,enableUserSelectHack:i.default.bool,offsetParent:function(_,g){if(_[g]&&_[g].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:i.default.arrayOf(i.default.number),handle:i.default.string,cancel:i.default.string,nodeRef:i.default.object,onStart:i.default.func,onDrag:i.default.func,onStop:i.default.func,onMouseDown:i.default.func,scale:i.default.number,className:o.dontSetMe,style:o.dontSetMe,transform:o.dontSetMe}),m(E,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),ye}var Ge;function Bt(){return Ge||(Ge=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),r.default=void 0;var i=k(tt()),t=m(rt()),e=m(Re()),n=m(Lt),o=We(),a=ut(),l=ke(),c=m(Ht()),v=m(ct());function m(h){return h&&h.__esModule?h:{default:h}}function p(h){if(typeof WeakMap!="function")return null;var d=new WeakMap,b=new WeakMap;return(p=function(S){return S?b:d})(h)}function k(h,d){if(h&&h.__esModule)return h;if(h===null||typeof h!="object"&&typeof h!="function")return{default:h};var b=p(d);if(b&&b.has(h))return b.get(h);var S={},O=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in h)if(s!=="default"&&Object.prototype.hasOwnProperty.call(h,s)){var u=O?Object.getOwnPropertyDescriptor(h,s):null;u&&(u.get||u.set)?Object.defineProperty(S,s,u):S[s]=h[s]}return S.default=h,b&&b.set(h,S),S}function x(){return x=Object.assign?Object.assign.bind():function(h){for(var d=1;d<arguments.length;d++){var b=arguments[d];for(var S in b)Object.prototype.hasOwnProperty.call(b,S)&&(h[S]=b[S])}return h},x.apply(this,arguments)}function D(h,d,b){return d=E(d),d in h?Object.defineProperty(h,d,{value:b,enumerable:!0,configurable:!0,writable:!0}):h[d]=b,h}function E(h){var d=_(h,"string");return typeof d=="symbol"?d:String(d)}function _(h,d){if(typeof h!="object"||h===null)return h;var b=h[Symbol.toPrimitive];if(b!==void 0){var S=b.call(h,d);if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(h)}class g extends i.Component{static getDerivedStateFromProps(d,b){let{position:S}=d,{prevPropsPosition:O}=b;return S&&(!O||S.x!==O.x||S.y!==O.y)?((0,v.default)("Draggable: getDerivedStateFromProps %j",{position:S,prevPropsPosition:O}),{x:S.x,y:S.y,prevPropsPosition:{...S}}):null}constructor(d){super(d),D(this,"onDragStart",(b,S)=>{if((0,v.default)("Draggable: onDragStart: %j",S),this.props.onStart(b,(0,a.createDraggableData)(this,S))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),D(this,"onDrag",(b,S)=>{if(!this.state.dragging)return!1;(0,v.default)("Draggable: onDrag: %j",S);const O=(0,a.createDraggableData)(this,S),s={x:O.x,y:O.y,slackX:0,slackY:0};if(this.props.bounds){const{x:w,y:W}=s;s.x+=this.state.slackX,s.y+=this.state.slackY;const[A,L]=(0,a.getBoundPosition)(this,s.x,s.y);s.x=A,s.y=L,s.slackX=this.state.slackX+(w-s.x),s.slackY=this.state.slackY+(W-s.y),O.x=s.x,O.y=s.y,O.deltaX=s.x-this.state.x,O.deltaY=s.y-this.state.y}if(this.props.onDrag(b,O)===!1)return!1;this.setState(s)}),D(this,"onDragStop",(b,S)=>{if(!this.state.dragging||this.props.onStop(b,(0,a.createDraggableData)(this,S))===!1)return!1;(0,v.default)("Draggable: onDragStop: %j",S);const s={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:w,y:W}=this.props.position;s.x=w,s.y=W}this.setState(s)}),this.state={dragging:!1,dragged:!1,x:d.position?d.position.x:d.defaultPosition.x,y:d.position?d.position.y:d.defaultPosition.y,prevPropsPosition:{...d.position},slackX:0,slackY:0,isElementSVG:!1},d.position&&!(d.onDrag||d.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var d,b;return(d=(b=this.props)===null||b===void 0||(b=b.nodeRef)===null||b===void 0?void 0:b.current)!==null&&d!==void 0?d:e.default.findDOMNode(this)}render(){const{axis:d,bounds:b,children:S,defaultPosition:O,defaultClassName:s,defaultClassNameDragging:u,defaultClassNameDragged:w,position:W,positionOffset:A,scale:L,...I}=this.props;let G={},se=null;const F=!!!W||this.state.dragging,y=W||O,f={x:(0,a.canDragX)(this)&&F?this.state.x:y.x,y:(0,a.canDragY)(this)&&F?this.state.y:y.y};this.state.isElementSVG?se=(0,o.createSVGTransform)(f,A):G=(0,o.createCSSTransform)(f,A);const C=(0,n.default)(S.props.className||"",s,{[u]:this.state.dragging,[w]:this.state.dragged});return i.createElement(c.default,x({},I,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),i.cloneElement(i.Children.only(S),{className:C,style:{...S.props.style,...G},transform:se}))}}r.default=g,D(g,"displayName","Draggable"),D(g,"propTypes",{...c.default.propTypes,axis:t.default.oneOf(["both","x","y","none"]),bounds:t.default.oneOfType([t.default.shape({left:t.default.number,right:t.default.number,top:t.default.number,bottom:t.default.number}),t.default.string,t.default.oneOf([!1])]),defaultClassName:t.default.string,defaultClassNameDragging:t.default.string,defaultClassNameDragged:t.default.string,defaultPosition:t.default.shape({x:t.default.number,y:t.default.number}),positionOffset:t.default.shape({x:t.default.oneOfType([t.default.number,t.default.string]),y:t.default.oneOfType([t.default.number,t.default.string])}),position:t.default.shape({x:t.default.number,y:t.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),D(g,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})}(Me)),Me}var Ve;function It(){if(Ve)return we.exports;Ve=1;const{default:r,DraggableCore:i}=Bt();return we.exports=r,we.exports.default=r,we.exports.DraggableCore=i,we.exports}var $t=It();const Ft=gt($t);var re=function(){return re=Object.assign||function(r){for(var i,t=1,e=arguments.length;t<e;t++){i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])}return r},re.apply(this,arguments)},qe={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Qe={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},_e={width:"20px",height:"20px",position:"absolute",zIndex:1},Xt={top:re(re({},qe),{top:"-5px"}),right:re(re({},Qe),{left:void 0,right:"-5px"}),bottom:re(re({},qe),{top:void 0,bottom:"-5px"}),left:re(re({},Qe),{left:"-5px"}),topRight:re(re({},_e),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:re(re({},_e),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:re(re({},_e),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:re(re({},_e),{left:"-10px",top:"-10px",cursor:"nw-resize"})},Ut=P.memo(function(r){var i=r.onResizeStart,t=r.direction,e=r.children,n=r.replaceStyles,o=r.className,a=P.useCallback(function(v){i(v,t)},[i,t]),l=P.useCallback(function(v){i(v,t)},[i,t]),c=P.useMemo(function(){return re(re({position:"absolute",userSelect:"none"},Xt[t]),n??{})},[n,t]);return M.jsx("div",{className:o||void 0,style:c,onMouseDown:a,onTouchStart:l,children:e})}),Yt=function(){var r=function(i,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])},r(i,t)};return function(i,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}(),ce=function(){return ce=Object.assign||function(r){for(var i,t=1,e=arguments.length;t<e;t++){i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])}return r},ce.apply(this,arguments)},Gt={width:"auto",height:"auto"},Pe=function(r,i,t){return Math.max(Math.min(r,t),i)},Ke=function(r,i,t){var e=Math.round(r/i);return e*i+t*(e-1)},me=function(r,i){return new RegExp(r,"i").test(i)},De=function(r){return!!(r.touches&&r.touches.length)},Vt=function(r){return!!((r.clientX||r.clientX===0)&&(r.clientY||r.clientY===0))},Ze=function(r,i,t){t===void 0&&(t=0);var e=i.reduce(function(o,a,l){return Math.abs(a-r)<Math.abs(i[o]-r)?l:o},0),n=Math.abs(i[e]-r);return t===0||n<t?i[e]:r},Ee=function(r){return r=r.toString(),r==="auto"||r.endsWith("px")||r.endsWith("%")||r.endsWith("vh")||r.endsWith("vw")||r.endsWith("vmax")||r.endsWith("vmin")?r:"".concat(r,"px")},Ce=function(r,i,t,e){if(r&&typeof r=="string"){if(r.endsWith("px"))return Number(r.replace("px",""));if(r.endsWith("%")){var n=Number(r.replace("%",""))/100;return i*n}if(r.endsWith("vw")){var n=Number(r.replace("vw",""))/100;return t*n}if(r.endsWith("vh")){var n=Number(r.replace("vh",""))/100;return e*n}}return r},qt=function(r,i,t,e,n,o,a){return e=Ce(e,r.width,i,t),n=Ce(n,r.height,i,t),o=Ce(o,r.width,i,t),a=Ce(a,r.height,i,t),{maxWidth:typeof e>"u"?void 0:Number(e),maxHeight:typeof n>"u"?void 0:Number(n),minWidth:typeof o>"u"?void 0:Number(o),minHeight:typeof a>"u"?void 0:Number(a)}},Qt=function(r){return Array.isArray(r)?r:[r,r]},Kt=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Je="__resizable_base__",Zt=function(r){Yt(i,r);function i(t){var e,n,o,a,l=r.call(this,t)||this;return l.ratio=1,l.resizable=null,l.parentLeft=0,l.parentTop=0,l.resizableLeft=0,l.resizableRight=0,l.resizableTop=0,l.resizableBottom=0,l.targetLeft=0,l.targetTop=0,l.delta={width:0,height:0},l.appendBase=function(){if(!l.resizable||!l.window)return null;var c=l.parentNode;if(!c)return null;var v=l.window.document.createElement("div");return v.style.width="100%",v.style.height="100%",v.style.position="absolute",v.style.transform="scale(0, 0)",v.style.left="0",v.style.flex="0 0 100%",v.classList?v.classList.add(Je):v.className+=Je,c.appendChild(v),v},l.removeBase=function(c){var v=l.parentNode;v&&v.removeChild(c)},l.state={isResizing:!1,width:(n=(e=l.propsSize)===null||e===void 0?void 0:e.width)!==null&&n!==void 0?n:"auto",height:(a=(o=l.propsSize)===null||o===void 0?void 0:o.height)!==null&&a!==void 0?a:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},l.onResizeStart=l.onResizeStart.bind(l),l.onMouseMove=l.onMouseMove.bind(l),l.onMouseUp=l.onMouseUp.bind(l),l}return Object.defineProperty(i.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||Gt},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"size",{get:function(){var t=0,e=0;if(this.resizable&&this.window){var n=this.resizable.offsetWidth,o=this.resizable.offsetHeight,a=this.resizable.style.position;a!=="relative"&&(this.resizable.style.position="relative"),t=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:n,e=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:o,this.resizable.style.position=a}return{width:t,height:e}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sizeStyle",{get:function(){var t=this,e=this.props.size,n=function(l){var c;if(typeof t.state[l]>"u"||t.state[l]==="auto")return"auto";if(t.propsSize&&t.propsSize[l]&&(!((c=t.propsSize[l])===null||c===void 0)&&c.toString().endsWith("%"))){if(t.state[l].toString().endsWith("%"))return t.state[l].toString();var v=t.getParentSize(),m=Number(t.state[l].toString().replace("px","")),p=m/v[l]*100;return"".concat(p,"%")}return Ee(t.state[l])},o=e&&typeof e.width<"u"&&!this.state.isResizing?Ee(e.width):n("width"),a=e&&typeof e.height<"u"&&!this.state.isResizing?Ee(e.height):n("height");return{width:o,height:a}},enumerable:!1,configurable:!0}),i.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var t=this.appendBase();if(!t)return{width:0,height:0};var e=!1,n=this.parentNode.style.flexWrap;n!=="wrap"&&(e=!0,this.parentNode.style.flexWrap="wrap"),t.style.position="relative",t.style.minWidth="100%",t.style.minHeight="100%";var o={width:t.offsetWidth,height:t.offsetHeight};return e&&(this.parentNode.style.flexWrap=n),this.removeBase(t),o},i.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},i.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},i.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var t=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:t.flexBasis!=="auto"?t.flexBasis:void 0})}},i.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},i.prototype.createSizeForCssProperty=function(t,e){var n=this.propsSize&&this.propsSize[e];return this.state[e]==="auto"&&this.state.original[e]===t&&(typeof n>"u"||n==="auto")?"auto":t},i.prototype.calculateNewMaxFromBoundary=function(t,e){var n=this.props.boundsByDirection,o=this.state.direction,a=n&&me("left",o),l=n&&me("top",o),c,v;if(this.props.bounds==="parent"){var m=this.parentNode;m&&(c=a?this.resizableRight-this.parentLeft:m.offsetWidth+(this.parentLeft-this.resizableLeft),v=l?this.resizableBottom-this.parentTop:m.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(c=a?this.resizableRight:this.window.innerWidth-this.resizableLeft,v=l?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(c=a?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),v=l?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return c&&Number.isFinite(c)&&(t=t&&t<c?t:c),v&&Number.isFinite(v)&&(e=e&&e<v?e:v),{maxWidth:t,maxHeight:e}},i.prototype.calculateNewSizeFromDirection=function(t,e){var n=this.props.scale||1,o=Qt(this.props.resizeRatio||1),a=o[0],l=o[1],c=this.state,v=c.direction,m=c.original,p=this.props,k=p.lockAspectRatio,x=p.lockAspectRatioExtraHeight,D=p.lockAspectRatioExtraWidth,E=m.width,_=m.height,g=x||0,h=D||0;return me("right",v)&&(E=m.width+(t-m.x)*a/n,k&&(_=(E-h)/this.ratio+g)),me("left",v)&&(E=m.width-(t-m.x)*a/n,k&&(_=(E-h)/this.ratio+g)),me("bottom",v)&&(_=m.height+(e-m.y)*l/n,k&&(E=(_-g)*this.ratio+h)),me("top",v)&&(_=m.height-(e-m.y)*l/n,k&&(E=(_-g)*this.ratio+h)),{newWidth:E,newHeight:_}},i.prototype.calculateNewSizeFromAspectRatio=function(t,e,n,o){var a=this.props,l=a.lockAspectRatio,c=a.lockAspectRatioExtraHeight,v=a.lockAspectRatioExtraWidth,m=typeof o.width>"u"?10:o.width,p=typeof n.width>"u"||n.width<0?t:n.width,k=typeof o.height>"u"?10:o.height,x=typeof n.height>"u"||n.height<0?e:n.height,D=c||0,E=v||0;if(l){var _=(k-D)*this.ratio+E,g=(x-D)*this.ratio+E,h=(m-E)/this.ratio+D,d=(p-E)/this.ratio+D,b=Math.max(m,_),S=Math.min(p,g),O=Math.max(k,h),s=Math.min(x,d);t=Pe(t,b,S),e=Pe(e,O,s)}else t=Pe(t,m,p),e=Pe(e,k,x);return{newWidth:t,newHeight:e}},i.prototype.setBoundingClientRect=function(){var t=1/(this.props.scale||1);if(this.props.bounds==="parent"){var e=this.parentNode;if(e){var n=e.getBoundingClientRect();this.parentLeft=n.left*t,this.parentTop=n.top*t}}if(this.props.bounds&&typeof this.props.bounds!="string"){var o=this.props.bounds.getBoundingClientRect();this.targetLeft=o.left*t,this.targetTop=o.top*t}if(this.resizable){var a=this.resizable.getBoundingClientRect(),l=a.left,c=a.top,v=a.right,m=a.bottom;this.resizableLeft=l*t,this.resizableRight=v*t,this.resizableTop=c*t,this.resizableBottom=m*t}},i.prototype.onResizeStart=function(t,e){if(!(!this.resizable||!this.window)){var n=0,o=0;if(t.nativeEvent&&Vt(t.nativeEvent)?(n=t.nativeEvent.clientX,o=t.nativeEvent.clientY):t.nativeEvent&&De(t.nativeEvent)&&(n=t.nativeEvent.touches[0].clientX,o=t.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var a=this.props.onResizeStart(t,e,this.resizable);if(a===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var l,c=this.window.getComputedStyle(this.resizable);if(c.flexBasis!=="auto"){var v=this.parentNode;if(v){var m=this.window.getComputedStyle(v).flexDirection;this.flexDir=m.startsWith("row")?"row":"column",l=c.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var p={original:{x:n,y:o,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:ce(ce({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(t.target).cursor||"auto"}),direction:e,flexBasis:l};this.setState(p)}},i.prototype.onMouseMove=function(t){var e=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&De(t))try{t.preventDefault(),t.stopPropagation()}catch{}var n=this.props,o=n.maxWidth,a=n.maxHeight,l=n.minWidth,c=n.minHeight,v=De(t)?t.touches[0].clientX:t.clientX,m=De(t)?t.touches[0].clientY:t.clientY,p=this.state,k=p.direction,x=p.original,D=p.width,E=p.height,_=this.getParentSize(),g=qt(_,this.window.innerWidth,this.window.innerHeight,o,a,l,c);o=g.maxWidth,a=g.maxHeight,l=g.minWidth,c=g.minHeight;var h=this.calculateNewSizeFromDirection(v,m),d=h.newHeight,b=h.newWidth,S=this.calculateNewMaxFromBoundary(o,a);this.props.snap&&this.props.snap.x&&(b=Ze(b,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(d=Ze(d,this.props.snap.y,this.props.snapGap));var O=this.calculateNewSizeFromAspectRatio(b,d,{width:S.maxWidth,height:S.maxHeight},{width:l,height:c});if(b=O.newWidth,d=O.newHeight,this.props.grid){var s=Ke(b,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),u=Ke(d,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),w=this.props.snapGap||0,W=w===0||Math.abs(s-b)<=w?s:b,A=w===0||Math.abs(u-d)<=w?u:d;b=W,d=A}var L={width:b-x.width,height:d-x.height};if(this.delta=L,D&&typeof D=="string"){if(D.endsWith("%")){var I=b/_.width*100;b="".concat(I,"%")}else if(D.endsWith("vw")){var G=b/this.window.innerWidth*100;b="".concat(G,"vw")}else if(D.endsWith("vh")){var se=b/this.window.innerHeight*100;b="".concat(se,"vh")}}if(E&&typeof E=="string"){if(E.endsWith("%")){var I=d/_.height*100;d="".concat(I,"%")}else if(E.endsWith("vw")){var G=d/this.window.innerWidth*100;d="".concat(G,"vw")}else if(E.endsWith("vh")){var se=d/this.window.innerHeight*100;d="".concat(se,"vh")}}var T={width:this.createSizeForCssProperty(b,"width"),height:this.createSizeForCssProperty(d,"height")};this.flexDir==="row"?T.flexBasis=T.width:this.flexDir==="column"&&(T.flexBasis=T.height);var F=this.state.width!==T.width,y=this.state.height!==T.height,f=this.state.flexBasis!==T.flexBasis,C=F||y||f;C&&it.flushSync(function(){e.setState(T)}),this.props.onResize&&C&&this.props.onResize(t,k,this.resizable,L)}},i.prototype.onMouseUp=function(t){var e,n,o=this.state,a=o.isResizing,l=o.direction;o.original,!(!a||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(t,l,this.resizable,this.delta),this.props.size&&this.setState({width:(e=this.props.size.width)!==null&&e!==void 0?e:"auto",height:(n=this.props.size.height)!==null&&n!==void 0?n:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:ce(ce({},this.state.backgroundStyle),{cursor:"auto"})}))},i.prototype.updateSize=function(t){var e,n;this.setState({width:(e=t.width)!==null&&e!==void 0?e:"auto",height:(n=t.height)!==null&&n!==void 0?n:"auto"})},i.prototype.renderResizer=function(){var t=this,e=this.props,n=e.enable,o=e.handleStyles,a=e.handleClasses,l=e.handleWrapperStyle,c=e.handleWrapperClass,v=e.handleComponent;if(!n)return null;var m=Object.keys(n).map(function(p){return n[p]!==!1?M.jsx(Ut,{direction:p,onResizeStart:t.onResizeStart,replaceStyles:o&&o[p],className:a&&a[p],children:v&&v[p]?v[p]:null},p):null});return M.jsx("div",{className:c,style:l,children:m})},i.prototype.render=function(){var t=this,e=Object.keys(this.props).reduce(function(a,l){return Kt.indexOf(l)!==-1||(a[l]=t.props[l]),a},{}),n=ce(ce(ce({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(n.flexBasis=this.state.flexBasis);var o=this.props.as||"div";return M.jsxs(o,ce({style:n,className:this.props.className},e,{ref:function(a){a&&(t.resizable=a)},children:[this.state.isResizing&&M.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},i.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},i}(P.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var Ne=function(r,i){return Ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},Ne(r,i)};function Jt(r,i){Ne(r,i);function t(){this.constructor=r}r.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var oe=function(){return oe=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(i[o]=t[o])}return i},oe.apply(this,arguments)};function er(r,i){var t={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&i.indexOf(e)<0&&(t[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,e=Object.getOwnPropertySymbols(r);n<e.length;n++)i.indexOf(e[n])<0&&Object.prototype.propertyIsEnumerable.call(r,e[n])&&(t[e[n]]=r[e[n]]);return t}var tr={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},rr=function(r){return{bottom:r,bottomLeft:r,bottomRight:r,left:r,right:r,top:r,topLeft:r,topRight:r}},nr=function(r){Jt(i,r);function i(t){var e=r.call(this,t)||this;return e.resizingPosition={x:0,y:0},e.offsetFromParent={left:0,top:0},e.resizableElement={current:null},e.originalPosition={x:0,y:0},e.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},e.onResizeStart=e.onResizeStart.bind(e),e.onResize=e.onResize.bind(e),e.onResizeStop=e.onResizeStop.bind(e),e.onDragStart=e.onDragStart.bind(e),e.onDrag=e.onDrag.bind(e),e.onDragStop=e.onDragStop.bind(e),e.getMaxSizesFromProps=e.getMaxSizesFromProps.bind(e),e}return i.prototype.componentDidMount=function(){this.updateOffsetFromParent();var t=this.offsetFromParent,e=t.left,n=t.top,o=this.getDraggablePosition(),a=o.x,l=o.y;this.draggable.setState({x:a-e,y:l-n}),this.forceUpdate()},i.prototype.getDraggablePosition=function(){var t=this.draggable.state,e=t.x,n=t.y;return{x:e,y:n}},i.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},i.prototype.getParentSize=function(){return this.resizable.getParentSize()},i.prototype.getMaxSizesFromProps=function(){var t=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,e=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:t,maxHeight:e}},i.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},i.prototype.getOffsetHeight=function(t){var e=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/e;case"body":return document.body.offsetHeight/e;default:return t.offsetHeight}},i.prototype.getOffsetWidth=function(t){var e=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/e;case"body":return document.body.offsetWidth/e;default:return t.offsetWidth}},i.prototype.onDragStart=function(t,e){this.props.onDragStart&&this.props.onDragStart(t,e);var n=this.getDraggablePosition();if(this.originalPosition=n,!!this.props.bounds){var o=this.getParent(),a=this.props.scale,l;if(this.props.bounds==="parent")l=o;else if(this.props.bounds==="body"){var c=o.getBoundingClientRect(),v=c.left,m=c.top,p=document.body.getBoundingClientRect(),k=-(v-o.offsetLeft*a-p.left)/a,x=-(m-o.offsetTop*a-p.top)/a,D=(document.body.offsetWidth-this.resizable.size.width*a)/a+k,E=(document.body.offsetHeight-this.resizable.size.height*a)/a+x;return this.setState({bounds:{top:x,right:D,bottom:E,left:k}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var _=o.getBoundingClientRect(),g=_.left,h=_.top,d=-(g-o.offsetLeft*a)/a,b=-(h-o.offsetTop*a)/a,D=(window.innerWidth-this.resizable.size.width*a)/a+d,E=(window.innerHeight-this.resizable.size.height*a)/a+b;return this.setState({bounds:{top:b,right:D,bottom:E,left:d}})}else typeof this.props.bounds=="string"?l=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(l=this.props.bounds);if(!(!(l instanceof HTMLElement)||!(o instanceof HTMLElement))){var S=l.getBoundingClientRect(),O=S.left,s=S.top,u=o.getBoundingClientRect(),w=u.left,W=u.top,A=(O-w)/a,L=s-W;if(this.resizable){this.updateOffsetFromParent();var I=this.offsetFromParent;this.setState({bounds:{top:L-I.top,right:A+(l.offsetWidth-this.resizable.size.width)-I.left/a,bottom:L+(l.offsetHeight-this.resizable.size.height)-I.top,left:A-I.left/a}})}}}},i.prototype.onDrag=function(t,e){if(this.props.onDrag){var n=this.offsetFromParent,o=n.left,a=n.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(t,oe(oe({},e),{x:e.x+o,y:e.y+a}));if(this.props.dragAxis==="x")return this.props.onDrag(t,oe(oe({},e),{x:e.x+o,y:this.originalPosition.y+a,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(t,oe(oe({},e),{x:this.originalPosition.x+o,y:e.y+a,deltaX:0}))}},i.prototype.onDragStop=function(t,e){if(this.props.onDragStop){var n=this.offsetFromParent,o=n.left,a=n.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(t,oe(oe({},e),{x:e.x+o,y:e.y+a}));if(this.props.dragAxis==="x")return this.props.onDragStop(t,oe(oe({},e),{x:e.x+o,y:this.originalPosition.y+a,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(t,oe(oe({},e),{x:this.originalPosition.x+o,y:e.y+a,deltaX:0}))}},i.prototype.onResizeStart=function(t,e,n){t.stopPropagation(),this.setState({resizing:!0});var o=this.props.scale,a=this.offsetFromParent,l=this.getDraggablePosition();if(this.resizingPosition={x:l.x+a.left,y:l.y+a.top},this.originalPosition=l,this.props.bounds){var c=this.getParent(),v=void 0;this.props.bounds==="parent"?v=c:this.props.bounds==="body"?v=document.body:this.props.bounds==="window"?v=window:typeof this.props.bounds=="string"?v=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(v=this.props.bounds);var m=this.getSelfElement();if(m instanceof Element&&(v instanceof HTMLElement||v===window)&&c instanceof HTMLElement){var p=this.getMaxSizesFromProps(),k=p.maxWidth,x=p.maxHeight,D=this.getParentSize();if(k&&typeof k=="string")if(k.endsWith("%")){var E=Number(k.replace("%",""))/100;k=D.width*E}else k.endsWith("px")&&(k=Number(k.replace("px","")));if(x&&typeof x=="string")if(x.endsWith("%")){var E=Number(x.replace("%",""))/100;x=D.height*E}else x.endsWith("px")&&(x=Number(x.replace("px","")));var _=m.getBoundingClientRect(),g=_.left,h=_.top,d=this.props.bounds==="window"?{left:0,top:0}:v.getBoundingClientRect(),b=d.left,S=d.top,O=this.getOffsetWidth(v),s=this.getOffsetHeight(v),u=e.toLowerCase().endsWith("left"),w=e.toLowerCase().endsWith("right"),W=e.startsWith("top"),A=e.startsWith("bottom");if((u||W)&&this.resizable){var L=(g-b)/o+this.resizable.size.width;this.setState({maxWidth:L>Number(k)?k:L})}if(w||this.props.lockAspectRatio&&!u&&!W){var L=O+(b-g)/o;this.setState({maxWidth:L>Number(k)?k:L})}if((W||u)&&this.resizable){var L=(h-S)/o+this.resizable.size.height;this.setState({maxHeight:L>Number(x)?x:L})}if(A||this.props.lockAspectRatio&&!W&&!u){var L=s+(S-h)/o;this.setState({maxHeight:L>Number(x)?x:L})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(t,e,n)},i.prototype.onResize=function(t,e,n,o){var a=this,l={x:this.originalPosition.x,y:this.originalPosition.y},c=-o.width,v=-o.height,m=["top","left","topLeft","bottomLeft","topRight"];m.includes(e)&&(e==="bottomLeft"?l.x+=c:(e==="topRight"||(l.x+=c),l.y+=v));var p=this.draggable.state;(l.x!==p.x||l.y!==p.y)&&it.flushSync(function(){a.draggable.setState(l)}),this.updateOffsetFromParent();var k=this.offsetFromParent,x=this.getDraggablePosition().x+k.left,D=this.getDraggablePosition().y+k.top;this.resizingPosition={x,y:D},this.props.onResize&&this.props.onResize(t,e,n,o,{x,y:D})},i.prototype.onResizeStop=function(t,e,n,o){this.setState({resizing:!1});var a=this.getMaxSizesFromProps(),l=a.maxWidth,c=a.maxHeight;this.setState({maxWidth:l,maxHeight:c}),this.props.onResizeStop&&this.props.onResizeStop(t,e,n,o,this.resizingPosition)},i.prototype.updateSize=function(t){this.resizable&&this.resizable.updateSize({width:t.width,height:t.height})},i.prototype.updatePosition=function(t){this.draggable.setState(t)},i.prototype.updateOffsetFromParent=function(){var t=this.props.scale,e=this.getParent(),n=this.getSelfElement();if(!e||n===null)return{top:0,left:0};var o=e.getBoundingClientRect(),a=o.left,l=o.top,c=n.getBoundingClientRect(),v=this.getDraggablePosition(),m=e.scrollLeft,p=e.scrollTop;this.offsetFromParent={left:c.left-a+m-v.x*t,top:c.top-l+p-v.y*t}},i.prototype.render=function(){var t=this,e=this.props,n=e.disableDragging,o=e.style,a=e.dragHandleClassName,l=e.position,c=e.onMouseDown,v=e.onMouseUp,m=e.dragAxis,p=e.dragGrid,k=e.bounds,x=e.enableUserSelectHack,D=e.cancel,E=e.children;e.onResizeStart,e.onResize,e.onResizeStop,e.onDragStart,e.onDrag,e.onDragStop;var _=e.resizeHandleStyles,g=e.resizeHandleClasses,h=e.resizeHandleComponent,d=e.enableResizing,b=e.resizeGrid,S=e.resizeHandleWrapperClass,O=e.resizeHandleWrapperStyle,s=e.scale,u=e.allowAnyClick,w=e.dragPositionOffset,W=er(e,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),A=this.props.default?oe({},this.props.default):void 0;delete W.default;var L=n||a?{cursor:"auto"}:{cursor:"move"},I=oe(oe(oe({},tr),L),o),G=this.offsetFromParent,se=G.left,T=G.top,F;l&&(F={x:l.x-se,y:l.y-T});var y=this.state.resizing?void 0:F,f=this.state.resizing?"both":m;return P.createElement(Ft,{ref:function(C){C&&(t.draggable=C)},handle:a?".".concat(a):void 0,defaultPosition:A,onMouseDown:c,onMouseUp:v,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:f,disabled:n,grid:p,bounds:k?this.state.bounds:void 0,position:y,enableUserSelectHack:x,cancel:D,scale:s,allowAnyClick:u,nodeRef:this.resizableElement,positionOffset:w},P.createElement(Zt,oe({},W,{ref:function(C){C&&(t.resizable=C,t.resizableElement.current=C.resizable)},defaultSize:A,size:this.props.size,enable:typeof d=="boolean"?rr(d):d,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:I,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:b,handleWrapperClass:S,handleWrapperStyle:O,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:_,handleClasses:g,handleComponent:h,scale:this.props.scale}),E))},i.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},i}(P.PureComponent);const ir={border:"1px solid #ccc",borderRadius:"8px",width:"100%",height:"100%"},or=({onClose:r})=>{const i=P.useRef(null),t=P.useRef(null),[e,n]=P.useState([{id:1,paths:[]}]),[o,a]=P.useState(0),[l,c]=P.useState(!1),[v,m]=P.useState(!1),[p,k]=P.useState(3),[x,D]=P.useState("#000000");P.useEffect(()=>{const u=()=>{c(window.innerWidth>=1024)};return u(),window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[]),P.useEffect(()=>{const u=w=>{t.current&&!t.current.contains(w.target)&&r()};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[r]);const E=async()=>{var w;const u=await((w=i.current)==null?void 0:w.exportPaths());if(u){const W=[...e];W[o].paths=u,n(W)}},_=async u=>{var W,A;await E(),a(u),await((W=i.current)==null?void 0:W.clearCanvas());const w=e[u].paths;w!=null&&w.length&&await((A=i.current)==null?void 0:A.loadPaths(w))},g=async()=>{var w;await E();const u={id:e.length+1,paths:[]};n([...e,u]),a(e.length),await((w=i.current)==null?void 0:w.clearCanvas())},h=async()=>{if(i.current)try{const u=await i.current.exportImage("png"),w=document.createElement("a");w.href=u,w.download=`drawing-page-${e[o].id}.png`,document.body.appendChild(w),w.click(),document.body.removeChild(w)}catch(u){console.error("Failed to export PNG",u)}},d=async()=>{if(!i.current)return;await i.current.clearCanvas();const u=[...e];u[o].paths=[],n(u)},b=()=>{m(u=>!u)},S=u=>{k(Number(u.target.value))},O=u=>{D(u.target.value)},s=M.jsxs("div",{ref:t,className:" relative p-4 w-full h-full bg-white rounded-md shadow-lg flex flex-col",children:[M.jsx("div",{className:"handle w-full cursor-grab active:cursor-grabbing bg-gray-200 text-main-color title p-4",children:"შავი ფურცელი"}),M.jsx("button",{onClick:r,className:"absolute top-2 right-2 px-2 py-1 bg-red-500 text-white rounded",children:M.jsx(yt,{className:"h-5 w-5"})}),M.jsx("div",{className:"mb-4 flex-1",children:M.jsx(Ot,{ref:i,style:ir,strokeWidth:p,strokeColor:v?"#FFFFFF":x,withTimestamp:!1})}),M.jsxs("div",{className:"flex flex-col gap-4",children:[M.jsxs("div",{className:"flex gap-2 overflow-x-scroll",children:[e.map((u,w)=>M.jsx("button",{onClick:()=>_(w),className:`px-3 py-1 rounded ${w===o?"text-main-color bg-dark-color":"bg-gray-200"}`,children:M.jsx("span",{children:u.id})},u.id)),M.jsx("button",{onClick:g,className:"px-3 py-1 bg- text-dark-color rounded",children:"+"})]}),M.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[M.jsx("button",{onClick:d,className:"px-4 py-2 rounded",children:M.jsx(Mt,{className:"w-5 h-5"})}),M.jsx("button",{onClick:b,className:`px-4 py-2 rounded ${v?"bg-main-color":"bg-gray-300"}`,children:M.jsx(xt,{className:"w-5 h-5"})}),M.jsxs("label",{className:"flex items-center gap-2",children:[M.jsx("span",{className:"whitespace-nowrap",children:"სისქე:"}),M.jsx("input",{type:"range",min:1,max:20,value:p,onChange:S}),M.jsx("span",{children:p})]}),!v&&M.jsx("label",{className:"flex items-center gap-2",children:M.jsx("input",{type:"color",value:x,onChange:O})}),M.jsx("button",{onClick:h,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"შენახვა"})]})]})]});return M.jsx("div",{className:"fixed inset-0 bg-black/30 z-200 flex justify-center items-end p-4",children:l?M.jsx(nr,{default:{x:window.innerWidth/6,y:window.innerHeight/6,width:window.innerWidth/2,height:window.innerHeight/1.5},minWidth:300,minHeight:500,bounds:"window",dragHandleClassName:"handle",className:"rounded-md shadow-lg bg-white",children:s}):M.jsx("div",{ref:t,className:"w-full h-[60vh] rounded-t-md shadow-lg bg-white",children:s})})},dr=()=>{const[r,i]=P.useState(!1),[t,e]=P.useState(!1),[n,o]=P.useState(!1),{catId:a,id:l,attemptId:c}=vt(),{loading:v,quizzStart:m,fetchQuizStart:p}=wt(),{loading:k,questions:x,fetchQuestions:D}=nt();return P.useEffect(()=>{c&&a&&l&&(p(a,l),D(c)),o(!1)},[c,D,a,l,p]),P.useEffect(()=>{t===!0?i(!1):r===!0&&e(!1)},[t,r]),v||k?M.jsx(et,{}):M.jsxs("div",{className:"h-screen overflow-hidden",children:[(m==null?void 0:m.file)&&M.jsx(mt,{fileUrl:m==null?void 0:m.file}),r&&M.jsx(Et,{isOpen:r,setIsOpen:i,isTraining:n,attempt:m==null?void 0:m.attempt,questions:x}),t&&M.jsx(or,{onClose:()=>e(!1)}),M.jsxs("div",{className:"fixed z-50 right-5 md:bottom-5 gap-y-3 bottom-20 flex flex-col justify-center items-centershadow-2xl",children:[M.jsx("div",{title:"answers",onClick:()=>i(!0),className:"cursor-pointer hover:-translate-y-2 transition-all aspect-square bg-main-color w-20 flex justify-center items-center rounded-full",children:M.jsx(Ct,{fontSize:40,color:"white"})}),M.jsx("div",{onClick:()=>e(!0),className:"cursor-pointer hover:-translate-y-2 transition-all aspect-square bg-main-color w-20 flex justify-center items-center rounded-full",children:M.jsx(Pt,{fontSize:40,color:"white"})})]})]})};export{dr as default};
